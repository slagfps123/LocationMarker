<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
        <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
        <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
        <script src="https://raw.githack.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>

       <script>
      AFRAME.registerComponent("dist", {
        init: function() {
        this.cam = document.querySelector("[camera]")
        this.phoenix1 = document.querySelector("#phoenix1")
    },
        tick: function() {
        let camPos = this.cam.object3D.position
        let phoenix1pos = this.phoenix1.object3D.position
        let distance = camPos.distanceTo(phoenix1pos)
        if (distance < 5) {
        // camera closer than 5m, do something
            document.getElementById("distancetext").innerHTML=distance;
            alert(`The distance is ${distance}`);
    }
  })
        </script>
    </head>

    <body style="margin: 0; overflow: hidden;">
        <a-scene
            renderer="logarithmicDepthBuffer: true;"
            embedded
            loading-screen="enabled: false;"
            arjs="sourceType: webcam; debugUIEnabled: false;"
        >
            <a-assets>
                <a-asset-item
                    id="animated-asset"
                    src="assets/asset.glb"
                ></a-asset-item>
            </a-assets>
                <a-text id="distancetext" ></a-text>
                <a-entity
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    gltf-model="#animated-asset"
                    scale="0.005 0.005 0.005"
                    gps-entity-place="latitude: 10.325525841318145; longitude: 123.91563353128733;"
                    id="phoenix1"
                ></a-entity>
        <!--
                <a-entity
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    gltf-model="#animated-asset"
                    scale="0.005 0.005 0.005"
                    gps-entity-place="latitude: 10.326269973971577; longitude: 123.91598758287729;"
                    hidden
                ></a-entity>

                <a-entity
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    gltf-model="#animated-asset"
                    scale="0.005 0.005 0.005"
                    gps-entity-place="latitude: 10.326037762552422; longitude: 123.91541895456614;"
                    hidden
                ></a-entity>

                <a-entity
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    gltf-model="#animated-asset"
                    scale="0.005 0.005 0.005"
                    gps-entity-place="latitude: 10.32566833494129; longitude: 123.91614851541819;"
                    hidden
                ></a-entity>

                <a-entity
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    gltf-model="#animated-asset"
                    scale="0.005 0.005 0.005"
                    gps-entity-place="latitude: 10.337479248478747; longitude: 123.94210156984629;"
                ></a-entity>
            
                <a-entity
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    gltf-model="#animated-asset"
                    scale="0.005 0.005 0.005"
                    gps-entity-place="latitude: 35.647235; longitude: 139.711988;"
                ></a-entity>
            
                <a-entity
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    gltf-model="#animated-asset"
                    scale="0.005 0.005 0.005"
                    gps-entity-place="latitude: 43.072786; longitude: 141.349100;"
                ></a-entity>
            
                <a-entity
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    gltf-model="#animated-asset"
                    scale="0.005 0.005 0.005"
                    gps-entity-place="latitude: 33.58928994371316; longitude: 130.41731159559293;"
                ></a-entity>
            -->
            <a-camera gps-camera rotation-reader></a-camera>
        </a-scene>
    </body>
</html>
