<!-- <!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
        <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
        <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
        <script src="https://raw.githack.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
       <script>
           
      AFRAME.registerComponent("dist", {
        init: function() {
        
        this.cam = document.querySelector("[camera]")
        this.phoenix1 = document.querySelector("#phoenix1")
        this.text = document.querySelector("a-text")
            let camPos = this.cam.object3D.position
            let phoenix1pos = this.phoenix1.object3D.position
            let distance = camPos.distanceTo(phoenix1pos)
            console.log("The distance is: " + distance);
    },
        tick: function() {
        let camPos = this.cam.object3D.position
        let phoenix1pos = this.phoenix1.object3D.position
        let distance = camPos.distanceTo(phoenix1pos)
        this.text.setAttribute("value", camPos.distanceTo(phoenix1pos))
        // if (distance < 5) {
        // camera closer than 5m, do something
        
            

    }
  })
        </script>
    </head>

    <body style="margin: 0; overflow: hidden;">
        <a-scene
            renderer="logarithmicDepthBuffer: true;"
            embedded
            loading-screen="enabled: false;"
            arjs="sourceType: webcam; debugUIEnabled: false;"
        >
            <a-assets>
                <a-asset-item
                    id="animated-asset"
                    src="assets/asset.glb"
                ></a-asset-item>
            </a-assets>
                <a-text size="double" color="red" id="textz"></a-text>
                <a-entity
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    gltf-model="#animated-asset"
                    scale="0.005 0.005 0.005"
                    gps-entity-place="latitude: 10.325525841318145; longitude: 123.91563353128733;"
                    id="phoenix1"
                ></a-entity>
        <!--
                <a-entity
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    gltf-model="#animated-asset"
                    scale="0.005 0.005 0.005"
                    gps-entity-place="latitude: 10.326269973971577; longitude: 123.91598758287729;"
                    hidden
                ></a-entity>

                <a-entity
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    gltf-model="#animated-asset"
                    scale="0.005 0.005 0.005"
                    gps-entity-place="latitude: 10.326037762552422; longitude: 123.91541895456614;"
                    hidden
                ></a-entity>

                <a-entity
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    gltf-model="#animated-asset"
                    scale="0.005 0.005 0.005"
                    gps-entity-place="latitude: 10.32566833494129; longitude: 123.91614851541819;"
                    hidden
                ></a-entity>

                <a-entity
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    gltf-model="#animated-asset"
                    scale="0.005 0.005 0.005"
                    gps-entity-place="latitude: 10.337479248478747; longitude: 123.94210156984629;"
                ></a-entity>
            
                <a-entity
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    gltf-model="#animated-asset"
                    scale="0.005 0.005 0.005"
                    gps-entity-place="latitude: 35.647235; longitude: 139.711988;"
                ></a-entity>
            
                <a-entity
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    gltf-model="#animated-asset"
                    scale="0.005 0.005 0.005"
                    gps-entity-place="latitude: 43.072786; longitude: 141.349100;"
                ></a-entity>
            
                <a-entity
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    gltf-model="#animated-asset"
                    scale="0.005 0.005 0.005"
                    gps-entity-place="latitude: 33.58928994371316; longitude: 130.41731159559293;"
                ></a-entity>
            
            <a-camera gps-camera rotation-reader dist></a-camera>
        </a-scene>
    </body>
</html>
-->
<!--
<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
    <script src="https://raw.githack.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
    <script src="index.js">
    </script>
  </head>

  <body style="margin: 0; overflow: hidden;">
    <a-scene
      renderer="logarithmicDepthBuffer: true;"
      embedded
      loading-screen="enabled: false;"
      arjs="sourceType: webcam; debugUIEnabled: false;"
    >
      <a-assets>
        <a-asset-item id="animated-asset" src="assets/asset.glb"></a-asset-item>
      </a-assets>
      <a-text size="double" color="red" id="textz"></a-text>
      <a-entity
        look-at="[gps-camera]"
        animation-mixer="loop: repeat"
        gltf-model="#animated-asset"
        scale="0.005 0.005 0.005"
        gps-entity-place="latitude: 10.325525841318145; longitude: 123.91563353128733;"
        id="phoenix1"
      ></a-entity>
      <a-camera gps-camera rotation-reader distance></a-camera>
    </a-scene>
  </body>
</html>
-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Location-based AR.js Distance Measurement</title>
    <!-- Include AR.js and Three.js libraries -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
    <script src="https://raw.githack.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
</head>
<body>
    <a-scene embedded arjs="detectionMode: mono_and_matrix; matrixCodeType: 3x3;">
        <!-- AR camera -->
        <a-entity id="camera" gps-camera rotation-reader></a-entity>
    </a-scene>

    <!-- Add a div to display distance -->
    <div id="distanceDisplay">Distance: N/A meters</div>

    <script>
        AFRAME.registerComponent('rotation-reader', {
            tick: function () {
                // Get camera rotation in radians
                const camera = document.getElementById('camera');
                const rotation = camera.getAttribute('rotation');
                const latitude = camera.getAttribute('gps-camera').data.latitude;
                const longitude = camera.getAttribute('gps-camera').data.longitude;

                // Your object's latitude and longitude (replace with the actual coordinates)
                const objectLatitude = YOUR_OBJECT_LATITUDE;
                const objectLongitude = YOUR_OBJECT_LONGITUDE;

                // Calculate the distance using the Haversine formula
                const distance = calculateHaversineDistance(
                    latitude, longitude,
                    objectLatitude, objectLongitude
                ).toFixed(2);

                document.getElementById('distanceDisplay').textContent = `Distance: ${distance} meters`;
            }
        });

        function calculateHaversineDistance(lat1, lon1, lat2, lon2) {
            const R = 6371; // Radius of the Earth in kilometers
            const dLat = deg2rad(lat2 - lat1);
            const dLon = deg2rad(lon2 - lon1);
            const a =
                Math.sin(dLat / 2) * Math.sin(dLat / 2) +
                Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) *
                Math.sin(dLon / 2) * Math.sin(dLon / 2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
            const distance = R * c; // Distance in kilometers
            return distance * 1000; // Convert to meters
        }

        function deg2rad(deg) {
            return deg * (Math.PI / 180);
        }
    </script>
</body>
</html>
